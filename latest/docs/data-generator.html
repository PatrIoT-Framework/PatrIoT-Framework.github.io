<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta content="IE=edge" http-equiv="X-UA-Compatible">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>PatrIoT Framework Latest | Data Generation | Data Generator</title>

  <!-- Bootstrap -->
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link href="../../latest/_stylesheets/asciibinder.css" rel="stylesheet" />
   <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
   <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
   <!--[if lt IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
   <![endif]-->

  <link href="../../latest/_images/favicon-32x32.png" rel="shortcut icon" type="text/css">
  <!--[if IE]><link rel="shortcut icon" href="../../latest/_images/favicon.ico"><![endif]-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/styles/default.min.css" crossorigin="anonymous" integrity="sha384-zhIsEafzyQWHSoMCQ4BfT8ZlRXQyIFwAHAJn32PNdsb8n6tVysGZSLpEEIvCskw4">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.2.0/highlight.min.js" crossorigin="anonymous" integrity="sha384-yDKe+FHcWYXuC4QP8bZULyLbkQWMpTkyk4v/fJi+7MwzWrT+SFIP5wFYQrWu5L+j"></script>
  <script type='text/javascript'>
      hljs.initHighlightingOnLoad();
  </script>
  <meta content="AsciiBinder" name="application-name">
</head>
<body>
   <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
	      <a class="navbar-brand" href="http://www.patriot-framework.io/">
		      <img alt="PatrIoTFramefork" src="../../latest/_images/PATRIOT_logo_horizontal.svg" height="30">
	      </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExample07" aria-controls="navbarsExample07" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarsExample07">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item">
              <a class="nav-link" href="../../index.html#main">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../../index.html#features">Features</a>
            </li>
            <li class="nav-item active">
              <a class="nav-link" href="../welcome/index.html">Documentation</a>
            </li>
        <li class="nav-item">
            <a class="nav-link" href="../javadocs/index.html">JavaDocs</a>
        </li>
            <li class="nav-item">
              <a class="nav-link" href="../../index.html#contact">Get in Touch</a>
            </li>
        </ul></div>
      </div>
    </nav>	
   <div class="container main-cont">
    <p class="d-md-none toggle-nav pull-left">
      <button class="btn btn-outline-secondary btn-sm" type="button" data-toggle="offcanvas">Toggle nav</button>
    </p>
    <ol class="breadcrumb bg-white">
      <li class="d-block d-md-none breadcrumb-item">
        <h4 class="red-text">Documentation</h4>
      </li>
      <li class="d-none d-md-block breadcrumb-item">
        <a href="https://patriot-framework.io/docs">Home</a>
      </li>
      <li class="d-none d-md-block breadcrumb-item">
        <a href="../welcome/index.html">PatrIoT Framework Latest</a>
      </li>
      <li class="d-none d-md-block breadcrumb-item active">
        <a href="../docs/data-generator.html">Data Generation</a>
      </li>
      
      <li class="d-none d-md-block breadcrumb-item active">
        Data Generator
      </li>
    </ol>
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-xs-8 col-sm-5 col-md-3 sidebar sidebar-offcanvas">
        <ul class="nav nav-sidebar">
    <li class="nav-header">
      <a class="" href="#;" data-toggle="collapse" data-target="#topicGroup0">
        <span id="tgSpan0" class="fa fa-angle-right"></span>PatrIoT Framework
      </a>
      <ul id="topicGroup0" class="collapse  list-unstyled">
            <li><a class="" href="../welcome/index.html">Welcome</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#;" data-toggle="collapse" data-target="#topicGroup1">
        <span id="tgSpan1" class="fa fa-angle-right"></span>Getting Started
      </a>
      <ul id="topicGroup1" class="collapse  list-unstyled">
            <li><a class="" href="../docs/framework.html">General information</a></li>
            <li><a class="" href="../docs/getting-started.html">Getting started guide</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#;" data-toggle="collapse" data-target="#topicGroup2">
        <span id="tgSpan2" class="fa fa-angle-right"></span>Framework Base
      </a>
      <ul id="topicGroup2" class="collapse  list-unstyled">
            <li><a class="" href="../docs/patriot-api.html">PatrIoT API</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#;" data-toggle="collapse" data-target="#topicGroup3">
        <span id="tgSpan3" class="fa fa-angle-right"></span>Network Simulation
      </a>
      <ul id="topicGroup3" class="collapse  list-unstyled">
            <li><a class="" href="../docs/network-sim.html">Network simulation</a></li>
            <li><a class="" href="../docs/multihost.html">Support for multihost</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#;" data-toggle="collapse" data-target="#topicGroup4">
        <span id="tgSpan4" class="fa fa-angle-down"></span>Data Generation
      </a>
      <ul id="topicGroup4" class="collapse show in list-unstyled">
            <li><a class="active" href="../docs/data-generator.html">Data Generator</a></li>
      </ul>
    </li>
    <li class="nav-header">
      <a class="" href="#;" data-toggle="collapse" data-target="#topicGroup5">
        <span id="tgSpan5" class="fa fa-angle-right"></span>Advanced topics
      </a>
      <ul id="topicGroup5" class="collapse  list-unstyled">
            <li><a class="" href="../docs/building-sources.html">Building sources</a></li>
            <li><a class="" href="../docs/smarthome-guide.html">Smart home tests</a></li>
      </ul>
    </li>
</ul>
      </div>
      <div class="col-xs-12 col-sm-9 col-md-9 main">
        <div class="page-header">
          <h2>Data generator</h2>
        </div>
        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#description">Description</a></li>
<li><a href="#functionality">Functionality</a></li>
<li><a href="#usage">Usage</a>
<ul class="sectlevel3">
<li><a href="#on-demand-data-pooling">On demand data pooling</a></li>
<li><a href="#continuous-data-delivery-activedevice">Continuous data delivery - <code>ActiveDevice</code></a></li>
<li><a href="#actuator-example">Actuator example</a></li>
<li><a href="#add-additional-capabilities-for-device">Add additional capabilities for <code>Device</code></a></li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="description"><a class="anchor" href="#description"></a>Description</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Data Generator library is a Java library offering tools for device simulation suitable for IoT testing environments
or as independent data sources. Device emulation supports consists of various types such as Sensors and Actuators,
each represents different roles and responsibilities with different data generation methods.</p>
</div>
<div class="paragraph">
<p>This library provides two methods of data generation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Polling</dt>
<dd>
<p>generated data are returned to the user by calling the <code>requestData(params)</code> method on Device.
This allows the user to get data on demand with custom parameters.
The number and types of parameters for this method depends mostly on the DataFeed implementation provided for the Device.</p>
</dd>
<dt class="hdlist1">Continuous data delivery</dt>
<dd>
<p>Is achieved by wrapping instance of <code>Device</code> with <code>ActiveDevice</code> object. In this case the <code>requestData()</code> method is called periodically by <code>ActiveDevice</code>. This composition can be considered as a one, standalone device.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For data manipulation, the user is advised to perform the following additional steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure a <code>NetworkAdapter</code> to enable data handling. (This is done the same way as in real-life applications.)
This way data can be sent to valid endpoint using the various network protocols like REST, MQTT and many more.</p>
</li>
<li>
<p>Enable <code>CoAPControlServer</code> from <code>Controller</code> package to allow ad-hoc configuration of remote devices. To access CoAP server created by particular devices use simple tool provided by the library: <code>CoAPControlClient</code>, or any other
CoAP client available on the market.</p>
</li>
<li>
<p>For testing purposes, it is recommended to create an <code>Observer</code>.
Using the <code>Observer</code> pattern, the user is able to catch important information from the data creation process without using debugging tools or viewing log messages.
For information on deploying.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Users can utilize three main data generators types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Sensor</dt>
<dd>
<p>interface adds possibility to define List of <code>DataFeed</code>. This provides possibility to simulate
data generation for multiple independent data sources. For example commonly known DHT11 temperature-humidity sensor is working with
two values simultaneously. This requires possibility to define multiple DataFeeds for one device.</p>
</dd>
<dt class="hdlist1">SimpleSensor</dt>
<dd>
<p>extends <code>Sensor</code> and restrict its functionality to use only one <code>DataFeed</code> as it is convenient
to sometimes utilize sensor that is monitoring only one value.</p>
</dd>
<dt class="hdlist1">Actuator</dt>
<dd>
<p>different type of <code>Device</code> than <code>Sensor</code>. Offers methods to simulate real life behaviour of actuators.
Important part of this concept is <code>StateMachine.class</code> which holds information about current state and time duration,
that is needed for actuator to finish simulated action. Handles any transitions between states if necessary.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The library provides few preconfigured devices that are ready for use. The idea behind them is to simplify the creation process for the user in case he wants to create commonly known devices but to offer him freedom in configuring his own.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Sensors</th>
<th class="tableblock halign-left valign-top">Actuators</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BasicSensor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BasicActuator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hygrometer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LinearActuator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thermometer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RotaryActuator</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DHT11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BinaryActuator</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="functionality"><a class="anchor" href="#functionality"></a>Functionality</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The packages currently offered are the following:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Device</dt>
<dd>
<p>(Sensor, SingleSensor, Actuator)  back and bone of library, brings parts of the library together. Gives meaning for generated data which are acquired from individual data feeds. Holds information like UUID, label, and description.</p>
</dd>
<dt class="hdlist1">DataFeed</dt>
<dd>
<p>tool to provide data streams to different components (e.g. time simulation, simulated devices). This interface is ready for further user customization,
as it is not possible to define all situations that could be needed in the future. So far the library provides examples, that can be divided into three parts:
SSJ (Stochastic Simulation in Java) - Java library providing a tool for stochastic data simulation developed at Université de Montréal (<a href="https://www.iro.umontreal.ca/~lecuyer/ssj-gh-pages/html/index.html" class="bare">https://www.iro.umontreal.ca/~lecuyer/ssj-gh-pages/html/index.html</a>)
Expression approach, where a user defines an expression (function) which solutions represents expected data stream
“Logic” driven approach. A user is fully capable to customize data generating class as long as it implements DataFeed interface</p>
</dd>
<dt class="hdlist1">Controller</dt>
<dd>
<p>provides a collection of classes that allow the user to manipulate with configuration of existing devices,
therefore influence ongoing processes. Thanks to usage of CoAP <sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>, user is
able to interact with local or remote devices. For this purpose, library supports both server and client CoAP perspectives.</p>
</dd>
<dt class="hdlist1">NetworkAdapter</dt>
<dd>
<p>provides facilities that enrich functionality of Device with possibility to transfer generated data
over the network to desired destination. Package implements support of protocols such as HTTP and MQTT.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage"><a class="anchor" href="#usage"></a>Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Principle behind creation of simulated device is simple. First, the user has to determinate desired properties of simulated
device and choose corresponding or best fitting representation offered by Data Generator library. Next step is to
correctly choose or configure method for data simulation itself (in case of <code>Sensor</code> it would be the right
choice of`DataFeed` and for <code>Actuator</code> it would be correct configuration of <code>StateMachine</code>). Finally, the last step
(or steps) is to assign all required functionality that is offered by the library to the device.</p>
</div>
<div class="paragraph">
<p>As we can see, the functionality of the library is achieved by putting together right pieces.
=== Sensor example</p>
</div>
<div class="sect3">
<h4 id="on-demand-data-pooling"><a class="anchor" href="#on-demand-data-pooling"></a>On demand data pooling</h4>
<div class="paragraph">
<p>A base for our device is properly configured data feed. For this example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">DataFeed</span> <span class="n">dataFeed</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">NormalDistVariateDataFeed</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">7</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Create Device with DataFeed. In this case, simple Sensor will be enough.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">SimpleSensor</span> <span class="n">device</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thermometer</span><span class="o">(</span><span class="s">"ThermometerExample"</span><span class="o">,</span> <span class="n">dataFeed</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Get generated data</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">device</span><span class="o">.</span><span class="na">requestData</span><span class="o">()</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="continuous-data-delivery-activedevice"><a class="anchor" href="#continuous-data-delivery-activedevice"></a>Continuous data delivery - <code>ActiveDevice</code></h4>
<div class="paragraph">
<p>Now, we know how to set up a simple device.
Define device as we did in previous examples
In order to simulate device in time - to be able to send data periodically in set intervals, we need to wrap it with running environment called time simulation
Like device, <code>ActiveDevice</code> also needs some data feed to be able to determinate mentioned time intervals</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">DataFeed</span> <span class="n">timeFeed</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LinearDataFeed</span><span class="o">(</span><span class="mi">2000</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We create an instance of <code>ActiveDevice</code> to simulate our device in time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">ActiveDevice</span> <span class="n">active</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ActiveDeviceImpl</span><span class="o">(</span><span class="n">timeFeed</span><span class="o">,</span> <span class="n">device</span><span class="o">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the device needs to configure. Finally, we start the simulation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">active</span><span class="o">.</span><span class="na">start</span><span class="o">();</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="actuator-example"><a class="anchor" href="#actuator-example"></a>Actuator example</h4>
<div class="paragraph">
<p>The behaviour of an <code>Actuator</code> is specified by the <code>StateMachine</code> configuration.</p>
</div>
<div class="paragraph">
<p>Example of state machine of two states and two transitions. Note that, input event is not specified, as there is
only one possible transition from each state (input event is generated and determinated automatically byt
the state machine):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">new</span> <span class="nc">StateMachine</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="s">"Off"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">"On"</span><span class="o">)</span>
        <span class="n">from</span><span class="o">(</span><span class="s">"On"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">"Off"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>StateMachine</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="k">new</span> <span class="nc">StateMachine</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="s">"Retracted"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">"Extended"</span><span class="o">,</span> <span class="s">"extend"</span><span class="o">,</span> <span class="s">"extending"</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="s">"Extended"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">"Retracted"</span><span class="o">,</span> <span class="s">"retract"</span><span class="o">,</span> <span class="s">"retracting"</span><span class="o">,</span> <span class="mi">10</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">()</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, assign created state machine to <code>Actuator</code> instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">Actuator</span> <span class="n">actuator</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BasicActuator</span><span class="o">(</span><span class="s">"actuator"</span><span class="o">)</span>
<span class="n">actuator</span><span class="o">.</span><span class="na">setStateMachine</span><span class="o">(</span><span class="n">sm</span><span class="o">)</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="add-additional-capabilities-for-device"><a class="anchor" href="#add-additional-capabilities-for-device"></a>Add additional capabilities for <code>Device</code></h4>
<div class="paragraph">
<p>To register device to CoAP server simply call method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="n">device</span><span class="o">.</span><span class="na">registerToCoapServer</span><span class="o">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Send generated data to desired destination using Network Adapter component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="java"><span class="nc">NetworkAdapter</span> <span class="n">na</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rest</span><span class="o">(</span><span class="n">httpEndpoint</span><span class="o">,</span> <span class="k">new</span> <span class="nc">JSONWrapper</span><span class="o">());</span>
<span class="n">sensor</span><span class="o">.</span><span class="na">setNetworkAdapter</span><span class="o">(</span><span class="n">na</span><span class="o">);</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. <a href="https://tools.ietf.org/html/rfc7252" class="bare">https://tools.ietf.org/html/rfc7252</a>
</div>
</div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>
   <script src="../../latest/_javascripts/bootstrap-offcanvas.js" type="text/javascript"></script>
   <script type="text/javascript">
       /*<![CDATA[*/
       $(document).ready(function() {
           $("[id^='topicGroup']").on('show.bs.collapse', function (event) {
               if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
                   $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
               }
           });
           $("[id^='topicGroup']").on('hide.bs.collapse', function (event) {
               if (!($(event.target).attr('id').match(/^topicSubGroup/))) {
                   $(this).parent().find("[id^='tgSpan']").toggleClass("fa-angle-right fa-angle-down");
               }
           });
           $("[id^='topicSubGroup']").on('show.bs.collapse', function () {
               $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
           });
           $("[id^='topicSubGroup']").on('hide.bs.collapse', function () {
               $(this).parent().find("[id^='sgSpan']").toggleClass("fa-caret-right fa-caret-down");
           });
       });
       /*]]>*/
   </script>
</body>
</html>